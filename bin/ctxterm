#!/usr/bin/fish

# Enhanced Mod+Enter

# it will spawn a shell starting in the current working 
# directory of your focused window, otherwise
# it will spawn a normal shell

set term alacritty

set focusPid (xprop -id (xdotool getwindowfocus) | grep '_NET_WM_PID' | grep -oE '[[:digit:]]*$')

if test -n "$focusPid"
	set link "/proc/$focusPid/cwd"
	set focusDir (readlink -f "$link")
end

# for rxvt-unicode, use -wd
if test -n "$focusDir"
	$term --working-directory $focusDir $argv
	exit $status
end

$term $argv
